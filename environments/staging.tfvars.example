# staging.tfvars.example
# Staging environment configuration for Hub-Spoke Network Topology
# Copy this file to staging.tfvars and customize for your staging environment
#
# Usage: terraform apply -var-file="staging.tfvars"

# ============================================================================
# General Configuration
# ============================================================================

environment = "staging"
location    = "westeurope"

tags = {
  Project     = "HubSpokeNetwork"
  ManagedBy   = "Terraform"
  Owner       = "Platform Team"
  CostCenter  = "IT-Infrastructure"
  Environment = "Staging"
}

# ============================================================================
# Network Configuration
# ============================================================================

hub_address_space        = "10.0.0.0/16"
staging_address_space    = "10.1.0.0/16"
production_address_space = "10.2.0.0/16"

# ============================================================================
# Hub Feature Flags
# ============================================================================

deploy_firewall           = true   # Enabled to test firewall rules
deploy_bastion            = true
deploy_gateway            = false  # Optional - enable if testing VPN
deploy_app_gateway        = true   # Enabled for testing web apps
deploy_management_subnet  = true

# ============================================================================
# Spoke Deployment Flags
# ============================================================================

deploy_staging_spoke    = true
deploy_production_spoke = false  # Not deployed in staging workspace

# Staging Spoke Subnets
deploy_staging_workload_subnet = true
deploy_staging_data_subnet     = true
deploy_staging_app_subnet      = true

# Production Spoke Subnets (not deployed in staging)
deploy_production_workload_subnet = false
deploy_production_data_subnet     = false
deploy_production_app_subnet      = false

# ============================================================================
# Azure Firewall Configuration
# ============================================================================

firewall_sku_tier          = "Standard"  # Match production for testing
firewall_threat_intel_mode = "Alert"     # Test threat detection
firewall_dns_servers       = []

# ============================================================================
# Azure Bastion Configuration - STAGING (Balanced)
# ============================================================================

bastion_sku                = "Basic"   # Cost-optimized but functional
bastion_scale_units        = 2         # N/A for Basic SKU
bastion_copy_paste_enabled = true
bastion_file_copy_enabled  = false     # Not available in Basic
bastion_ip_connect_enabled = false     # Not available in Basic
bastion_tunneling_enabled  = false     # Not available in Basic
bastion_zones              = ["1"]     # Single zone for cost savings

# ============================================================================
# Application Gateway Configuration - STAGING (Balanced)
# ============================================================================

app_gateway_sku_name        = "Standard_v2"  # Match production for testing
app_gateway_sku_tier        = "Standard_v2"
app_gateway_enable_autoscale = true
app_gateway_min_capacity    = 1  # Lower capacity for staging
app_gateway_max_capacity    = 5  # Moderate max capacity
app_gateway_enable_waf      = false  # Optional - enable to test WAF rules
app_gateway_waf_mode        = "Detection"  # Use Detection in staging
app_gateway_zones           = ["1", "2"]  # 2 zones for balance

# ============================================================================
# High Availability
# ============================================================================

availability_zones = ["1", "2"]  # 2 zones - balance between cost and HA testing

# ============================================================================
# Route Table Configuration
# ============================================================================

enable_forced_tunneling = true  # Test routing like production

# ============================================================================
# Monitoring and Diagnostics
# ============================================================================

enable_diagnostics         = true
enable_flow_logs           = true   # Enabled for troubleshooting
enable_traffic_analytics   = true   # Test traffic analytics
traffic_analytics_interval = 10

log_analytics_sku            = "PerGB2018"
log_analytics_retention_days = 30
storage_replication_type     = "LRS"  # Locally redundant for staging

# ============================================================================
# Resource Lock Configuration
# ============================================================================

enable_resource_lock = false  # Disabled to allow updates and testing
